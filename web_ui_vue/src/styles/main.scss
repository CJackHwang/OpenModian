// Material Design 3 全局样式系统 - 现代化扁平设计

// 现代化全局样式 - 基于用户要求的完整样式规范
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html,
body {
  -webkit-text-size-adjust: 100%;
  word-break: normal;
  tab-size: 4;
  text-rendering: optimizeLegibility;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  font-family: "Roboto Flex", "Roboto", "Helvetica Neue", Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow-wrap: break-word;
  color: inherit;
  letter-spacing: 0.0178571429em;
  text-transform: none;
  direction: ltr;
  color-scheme: normal;
  font-size: 1rem;
  font-weight: 400;
  line-height: 1.5;
  user-select: none;
  background-repeat: no-repeat;
}

// MD3 设计令牌系统 - 基于官方Material Design 3规范
:root {
  // MD3 间距系统 - 官方标准
  --md3-spacing-xs: 4px;
  --md3-spacing-sm: 8px;
  --md3-spacing-md: 16px;
  --md3-spacing-lg: 24px;
  --md3-spacing-xl: 32px;
  --md3-spacing-xxl: 48px;

  // MD3 圆角系统 - 官方标准（基于Android开发者文档）
  --md3-radius-none: 0px; // 无圆角
  --md3-radius-xs: 4px; // 小组件（文本框）
  --md3-radius-sm: 8px; // 芯片
  --md3-radius-md: 12px; // 卡片
  --md3-radius-lg: 16px; // FAB
  --md3-radius-xl: 20px; // 按钮
  --md3-radius-xxl: 28px; // 大型容器
  --md3-radius-full: 50%; // 完全圆形

  // MD3 动画系统 - 官方标准缓动
  --md3-motion-easing-standard: cubic-bezier(0.2, 0, 0, 1);
  --md3-motion-easing-emphasized: cubic-bezier(0.05, 0.7, 0.1, 1);
  --md3-motion-duration-short: 150ms;
  --md3-motion-duration-medium: 300ms;
  --md3-motion-duration-long: 500ms;

  // MD3 状态层透明度 - 官方标准
  --md3-state-hover-opacity: 0.08;
  --md3-state-focus-opacity: 0.12;
  --md3-state-pressed-opacity: 0.16;

  // MD3 elevation系统 - 强制扁平化，所有阴影设为0
  --md3-elevation-level0: 0dp; // 表面
  --md3-elevation-level1: 0dp; // 强制扁平化
  --md3-elevation-level2: 0dp; // 强制扁平化
  --md3-elevation-level3: 0dp; // 强制扁平化
  --md3-elevation-level4: 0dp; // 强制扁平化
  --md3-elevation-level5: 0dp; // 强制扁平化

  // MD3 tonal elevation透明度
  --md3-tonal-elevation-1: 0.05;
  --md3-tonal-elevation-2: 0.08;
  --md3-tonal-elevation-3: 0.11;
  --md3-tonal-elevation-4: 0.12;
  --md3-tonal-elevation-5: 0.14;

  // 兼容性变量 - 保持向后兼容
  --spacing-xs: var(--md3-spacing-xs);
  --spacing-sm: var(--md3-spacing-sm);
  --spacing-md: var(--md3-spacing-md);
  --spacing-lg: var(--md3-spacing-lg);
  --spacing-xl: var(--md3-spacing-xl);
  --spacing-xxl: var(--md3-spacing-xxl);

  --radius-sm: var(--md3-radius-sm);
  --radius-md: var(--md3-radius-md);
  --radius-lg: var(--md3-radius-lg);
  --radius-xl: var(--md3-radius-xl);

  // 扁平化过渡效果 - 移除复杂动画
  --transition-fast: 0ms;
  --transition-normal: 0ms;
  --transition-slow: 0ms;

  // 现代化布局变量
  --v-layout-left: 320px;
  --v-layout-right: 0px;
  --v-layout-top: 72px;
  --v-layout-bottom: 0px;

  // 输入控件变量
  --v-input-control-height: 56px;
  --v-input-padding-top: 16px;
  --v-selection-control-size: 40px;
}

// MD3 应用级组件样式 - 现在通过Vuetify defaults配置管理
// 保留少量必要的应用级样式类

.app-card {
  // 基础样式现在通过VCard defaults管理
  transition: background-color var(--md3-motion-duration-short)
    var(--md3-motion-easing-standard);
}

.app-button {
  // 基础样式现在通过VBtn defaults管理
  transition: background-color var(--md3-motion-duration-short)
    var(--md3-motion-easing-standard);
}

.app-chip {
  // 基础样式现在通过VChip defaults管理
  transition: background-color var(--md3-motion-duration-short)
    var(--md3-motion-easing-standard);
}

// MD3 图标配色现在通过Vuetify defaults和主题系统管理

// MD3 文字颜色工具类 - 移除!important，使用标准CSS优先级
.text-on-surface {
  color: rgb(var(--v-theme-on-surface));
}

.text-on-surface-variant {
  color: rgb(var(--v-theme-on-surface-variant));
}

.text-on-primary {
  color: rgb(var(--v-theme-on-primary));
}

.text-on-secondary {
  color: rgb(var(--v-theme-on-secondary));
}

.text-on-tertiary {
  color: rgb(var(--v-theme-on-tertiary));
}

.text-success {
  color: rgb(var(--v-theme-success));
}

.text-error {
  color: rgb(var(--v-theme-error));
}

.text-warning {
  color: rgb(var(--v-theme-warning));
}

.text-info {
  color: rgb(var(--v-theme-info));
}

// MD3 容器颜色工具类 - 移除!important
.text-on-primary-container {
  color: rgb(var(--v-theme-on-primary-container));
}

.text-on-secondary-container {
  color: rgb(var(--v-theme-on-secondary-container));
}

.text-on-success-container {
  color: rgb(var(--v-theme-on-success-container));
}

.text-on-info-container {
  color: rgb(var(--v-theme-on-info-container));
}

.text-on-warning-container {
  color: rgb(var(--v-theme-on-warning-container));
}

.text-on-primary-container-variant {
  color: rgba(var(--v-theme-on-primary-container), 0.7);
}

.text-on-secondary-container-variant {
  color: rgba(var(--v-theme-on-secondary-container), 0.7);
}

.text-on-success-container-variant {
  color: rgba(var(--v-theme-on-success-container), 0.7);
}

.text-on-info-container-variant {
  color: rgba(var(--v-theme-on-info-container), 0.7);
}

.text-on-warning-container-variant {
  color: rgba(var(--v-theme-on-warning-container), 0.7);
}

// Vuetify组件文字颜色现在通过主题系统自动管理
// MD3 文字强调类 - 移除!important
.text-medium-emphasis {
  color: rgba(var(--v-theme-on-surface), var(--v-medium-emphasis-opacity));
}

.text-high-emphasis {
  color: rgba(var(--v-theme-on-surface), var(--v-high-emphasis-opacity));
}

// VCard文字颜色由Vuetify3自动管理，无需CSS覆盖

// VListItem文字颜色和选中状态由Vuetify3自动管理，无需CSS覆盖

// VAlert样式现在通过Vuetify defaults配置管理

// VField和VSelect文字颜色由Vuetify3自动管理，无需CSS覆盖

// MD3 VSelect和VMenu样式 - 大圆角扁平化设计
.v-select-menu,
.v-menu-content {
  background-color: rgb(var(--v-theme-surface-container-high));
  border: 1px solid rgb(var(--v-theme-outline)); // 使用描边而非阴影
  box-shadow: none; // 移除阴影，完全扁平化
  border-radius: var(--md3-radius-lg); // 大圆角

  .v-list {
    background-color: transparent;
  }
}

// MD3 VMenu覆盖层样式 - 大圆角扁平化设计
.v-menu > .v-overlay__content {
  background-color: rgb(var(--v-theme-surface-container-high));
  border: 1px solid rgb(var(--v-theme-outline));
  box-shadow: none; // 移除阴影
  border-radius: var(--md3-radius-lg); // 大圆角
}

// MD3 对话框内容样式 - 通过Vuetify配置的contentClass管理
.v-dialog-content {
  background-color: rgb(var(--v-theme-surface));
  color: rgb(var(--v-theme-on-surface)); // 确保文字颜色正确
  border: 1px solid rgb(var(--v-theme-outline));
  border-radius: var(--md3-radius-xl); // 确保对话框圆角正确显示
  overflow: hidden; // 防止内容溢出圆角
}

// MD3 覆盖层内容样式 - 确保所有弹出内容有正确背景和文字颜色
.v-overlay-content {
  .v-card {
    background-color: rgb(var(--v-theme-surface));
    color: rgb(var(--v-theme-on-surface)); // 确保文字颜色正确
    border: 1px solid rgb(var(--v-theme-outline));
    border-radius: var(--md3-radius-xl); // 确保对话框圆角正确显示
    overflow: hidden; // 防止内容溢出圆角
  }
}

// MD3 对话框圆角修复 - 仅针对对话框内的卡片
.v-dialog .v-overlay__content .v-card {
  border-radius: var(--md3-radius-xl);
  overflow: hidden;
  color: rgb(var(--v-theme-on-surface)); // 确保文字颜色正确
}

// MD3 表面颜色组件文字颜色修复 - 确保所有使用surface颜色的组件有正确的文字颜色
.v-card[style*="background-color: rgb(var(--v-theme-surface))"],
.v-sheet[style*="background-color: rgb(var(--v-theme-surface))"],
.v-card.bg-surface,
.v-sheet.bg-surface {
  color: rgb(var(--v-theme-on-surface)) !important;

  // 确保子元素也有正确的文字颜色
  .v-card-title,
  .v-card-text,
  .v-card-subtitle,
  .v-list-item-title,
  .v-list-item-subtitle,
  .v-text-field input,
  .v-text-field label {
    color: inherit;
  }
}

// MD3 文字按钮可见性修复 - 通过Vuetify类名管理，无强制覆盖
.v-btn--variant-text {
  color: rgb(var(--v-theme-primary));
  opacity: 0.87;

  &:hover {
    background-color: rgba(var(--v-theme-primary), 0.08);
  }

  &:focus {
    background-color: rgba(var(--v-theme-primary), 0.12);
  }

  // 不同颜色的按钮
  &.text-primary {
    color: rgb(var(--v-theme-primary));
    &:hover { background-color: rgba(var(--v-theme-primary), 0.08); }
  }

  &.text-secondary {
    color: rgb(var(--v-theme-secondary));
    &:hover { background-color: rgba(var(--v-theme-secondary), 0.08); }
  }

  &.text-success {
    color: rgb(var(--v-theme-success));
    &:hover { background-color: rgba(var(--v-theme-success), 0.08); }
  }

  &.text-warning {
    color: rgb(var(--v-theme-warning));
    &:hover { background-color: rgba(var(--v-theme-warning), 0.08); }
  }

  &.text-error {
    color: rgb(var(--v-theme-error));
    &:hover { background-color: rgba(var(--v-theme-error), 0.08); }
  }

  &.text-info {
    color: rgb(var(--v-theme-info));
    &:hover { background-color: rgba(var(--v-theme-info), 0.08); }
  }
}

// .v-list 和 .v-list-item 样式现在通过Vuetify defaults配置管理

// VBtn样式现在完全通过Vuetify3官方defaults配置管理

// .v-chip 样式现在通过Vuetify defaults配置管理

// 响应式工具类
// 使用Vuetify的响应式显示类替代自定义实现
// 推荐使用: d-none d-md-block, d-block d-md-none 等Vuetify原生类

// MD3 扁平化设计 - 完全通过Vuetify3 defaults配置管理，无CSS覆盖

// MD3 布局系统 - 响应式容器
.app-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: var(--md3-spacing-md);

  @media (min-width: 600px) {
    padding: var(--md3-spacing-lg);
  }

  @media (min-width: 1280px) {
    max-width: 1400px;
    padding: var(--md3-spacing-xl);
  }

  @media (min-width: 1920px) {
    max-width: 1600px;
  }
}

.app-section {
  margin-bottom: var(--md3-spacing-xl);

  @media (min-width: 1280px) {
    margin-bottom: var(--md3-spacing-xxl);
  }
}

// MD3 间距工具类
.spacing-xs {
  margin: var(--md3-spacing-xs);
}
.spacing-sm {
  margin: var(--md3-spacing-sm);
}
.spacing-md {
  margin: var(--md3-spacing-md);
}
.spacing-lg {
  margin: var(--md3-spacing-lg);
}
.spacing-xl {
  margin: var(--md3-spacing-xl);
}

.p-xs {
  padding: var(--md3-spacing-xs);
}
.p-sm {
  padding: var(--md3-spacing-sm);
}
.p-md {
  padding: var(--md3-spacing-md);
}
.p-lg {
  padding: var(--md3-spacing-lg);
}
.p-xl {
  padding: var(--md3-spacing-xl);
}

// MD3 动画类 - 使用标准缓动
.fade-in {
  animation: fadeIn var(--md3-motion-duration-medium)
    var(--md3-motion-easing-standard);
}

.fade-in-up {
  animation: fadeInUp var(--md3-motion-duration-medium)
    var(--md3-motion-easing-standard);
}

.slide-in-left {
  animation: slideInLeft var(--md3-motion-duration-medium)
    var(--md3-motion-easing-standard);
}

.scale-in {
  animation: scaleIn var(--md3-motion-duration-short)
    var(--md3-motion-easing-emphasized);
}

// 动画关键帧
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(16px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translateX(-16px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

// MD3 表单和表格聚焦状态现在通过Vuetify defaults配置管理

// MD3 文字颜色现在通过Vuetify主题配置管理

// 工具类
.text-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.cursor-pointer {
  cursor: pointer;
}

.user-select-none {
  user-select: none;
}

// MD3 状态指示器系统
.app-status {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  margin-right: var(--md3-spacing-sm);
  transition: var(--transition-fast);
}

.status-running {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

.status-success {
  background-color: rgb(var(--v-theme-success));
}

.status-error {
  background-color: rgb(var(--v-theme-error));
}

.status-warning {
  background-color: rgb(var(--v-theme-warning));
}

.status-info {
  background-color: rgb(var(--v-theme-info));
}

@keyframes pulse {
  0%,
  100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.6;
    transform: scale(1.15);
  }
}

// 空状态样式
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 48px 24px;
  text-align: center;

  .empty-icon {
    margin-bottom: 16px;
    opacity: 0.6;
  }

  .empty-title {
    font-size: 1.125rem;
    font-weight: 500;
    margin-bottom: 8px;
  }

  .empty-subtitle {
    font-size: 0.875rem;
    opacity: 0.7;
    max-width: 400px;
  }
}

// MD3 数据表格系统 - 基础样式现在通过Vuetify defaults管理
.app-table {
  // 保留必要的应用级样式
  overflow: hidden;

  // 响应式表格隐藏列 - 使用Vuetify原生响应式类，移除!important
  // 推荐使用VDataTable的headers配置中的responsive属性

  // 大屏幕高信息密度优化现在通过VDataTable的defaults配置管理
}

// 骨架屏加载效果
.skeleton-loader {
  background: linear-gradient(
    90deg,
    rgba(var(--v-theme-surface), 1) 25%,
    rgba(var(--v-theme-on-surface), 0.1) 50%,
    rgba(var(--v-theme-surface), 1) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s infinite;
  border-radius: 4px;
}

@keyframes skeleton-loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

// 强制移除所有组件的默认阴影 - 完全扁平化设计（保留按钮原样）
.v-card,
.v-chip,
.v-dialog,
.v-menu,
.v-sheet,
.v-app-bar,
.v-navigation-drawer,
.v-data-table,
.v-expansion-panels,
.v-stepper,
.v-carousel,
.v-banner,
.v-fab,
.v-bottom-sheet,
.v-date-picker,
.v-time-picker,
.v-alert,
.v-overlay__content,
.v-btn-group,
.v-btn-toggle {
  box-shadow: none !important;
  -webkit-box-shadow: none !important;
  -moz-box-shadow: none !important;
}

// 确保布局容器有正确的层级和定位
.v-container,
.v-row,
.v-col {
  position: relative;
  z-index: auto;
}

// 防止组件重叠的布局修复
.v-card {
  position: relative;
  z-index: 1;
  // 确保卡片内容不会溢出
  overflow: visible;
}

.v-list {
  // 确保列表有正确的层级
  position: relative;
  z-index: auto;
}

.v-expansion-panels {
  // 确保展开面板有正确的层级
  position: relative;
  z-index: 2;
}
